## 합성과 유연한 설계


합성에서 두 객체 사이의 의존성은 런타임에 해결된다. <br/>
상속 관계는 is-a 관계라고 부르고 합성 관계는 has-a 관계라고 부른다. <br/>

상속과 합성은 코드 재사용이라는 동일한 목적을 가진다는 점을 제외하면 구현 방법부터 변경을 다루는 방식에 이르기 까지 모든 면에서 도드라진 차이를 보인다. 

- 상속 단점
    - 상속을 제대로 활용하기 위해서는 부모 클래스의 내부 구현에 대해 상세하게 알아야 하기 때문에 자식 클래스와 부모 클래스 사이의 결합도가 높아질 수 밖에 없다. 

    - 상속은 구현에 의존한다.
        - 합성은 구현에 의존하지 않는다. 합성은 내부에 포함되는 객체의 구현이 아닌 퍼블릭 인터페이스에 의존한다. 

    - 상속 관계는 클래스 사이의 정적인 관계인 데 비해 합성 관계는 객체 사이의 동적인 관계다. 
        - 합성 관계는 실행 시점에 동적으로 변경할 수 있기 때문이다. 

    - 상속은 부모 클래스 안에 구현된 코드 자체를 재사용하지만 합성은 포함되는 객체의 퍼블릭 인터페이스를 재사용한다. 
        - 합성은 클래스 사이의 높은 결합도를 객체 사이의 낮은 결합도로 대체할 수 있다. 


### 화이트 박스 와 블랙박스

- 서브 클래싱에 의한 재사용을 화이트 박스 재사용이라고 부른다.(상속)
- 객체 내부는 공개되지 않고 인터페이스를 통해서만 재사용되는 것을 블랙 박스라고 한다.( 합성)


## 상속을 합성으로 변경하기

### 상속 문제점

- 불필요한 인터페이스 상속 문제
    - 합성을 이용하면 기존의 인터페이스를 외부에 공개하지 않고 사용할 수 있다. 
- 매서드 오버라이딩의 오작용 문제
- 부모 클래스와 자식 클래스의 동시 수정 문제


### 상속으로 인한 조합의 폭발적인 증가

- 요구사항이 추가될 때 마다 상속클래스를 사용하여 구현한다면 변경의 어려움이 생긴다.  여러개의 요구사항을 조합해야 되는 경우가 발생하기 때문이다. 


### 합성 관계로 변경하기

- 합성은 컴파일타임 관계를 런타임 관계로 변경함으로써 클래스폭발 문제를 해결한다. 
    - 상속을 사용하면 부모 클래스와 자식 클래스 사이의 관계가 정적으로 고정되기 떄문에 실행 시점에 동적으로 관계를 변경할 수 있는 방법이 없다. 


- 합성은 조합을 구성하는 요소들을 개별 클래스로 구현한 후 실행 시점에 인스턴스를 조립하는 방법을 사용하는 것이라고 할 수 있다. 컴파일 의존성에 속박되지 않고 다양한 방식의 런타임 의존성을 구성할 수  있다는 것이 합성이 제공하는 가장 커다란 장점이다. 
    - 컴파일타임 의존성과 런타임 의존성의 거리가 멀면 멀수록 설계의 복잡도는 상승한다. 
        - 설계는 변경과 유지보수를 위해 존재한다는 사실을 기억해야 한다. 
        - 변경에 따르는 고통이 복잡성으로 인한 혼란을 넘어서고 있다면 유연성의 손을 들어주는 것이 현명한 판달일 경우가 높다. 

        