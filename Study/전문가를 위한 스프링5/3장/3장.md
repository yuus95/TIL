
# 스프링 Ioc와 DI 소개


## Ioc와 DI
- Ioc와 DI의 주 목적은 컴포넌트의 의존성을 제공하고 이러한 의존성을 라이프 사이클 전반에 걸쳐 관리하는 보다 간편한 메커니즘을 제공하는 것

- DI에 관련된 설명은 항상 Ioc에 관련된 설명이지만 Ioc에 관한 설명이 항상 DI 설명이 아니다.
    - Ioc는 의존성 주입, 의존성 룩업으로 나뉘어지기 떄문이다. 


## Ioc의 종류

<br/>

1. *의존성 룩업*

- 컴포넌트 스스로 의존성의 참조를 가져와야 한다. 
- 의존성 풀, 문맥에 따른 의존성 룩업 이라는 두가지 방식으로 나뉜다ㅏ. 

### 의존성 풀

- 의존성 풀에서는 필요에 따라 레지스트리에서 의존성을 가져오게 된다. 


<img src="/Users/yushin/kys/projects/TIL/Study/전문가를 위한 스프링5/3장/의존성풀.png" height = 250pm width = 100%>

- *JNDI 이미지 (출처 오라클)* 
    - 특정 디렉토리나 파일을 네이밍을 가져올 수 있따.  

<img src = "/Users/yushin/kys/projects/TIL/Study/전문가를 위한 스프링5/3장/JNDI.png">


2. *문맥에 따른 의존성 룩업*

-의존성 풀 처럼 특정 중앙 레지스트리에서 의존성을 가져오는 것이 아니라 자원을 관리하는 컨테이너에서 의존성을 가져온다. 


### 생성자 의존성 주입

- 생성자 의존성 주입은 컴포넌트의 생성자를 이용해서 해당 컴포넌트가 필요로하는 의존성을 제공하는 방식이다. 

- 생성자 주입을 사용할 때 의존성 주입 없이는 빈을 생성할 수 없으므로 반드시 의존성을 주입해야 한다.

### 수정자 의존성 주입

- Ioc 컨테이너가 관리할 수 있도록 의존성을 노출한다. 



### 의존성 주입 vs 의존성 룩업

- 무조건 의존성 주입이 답이다.
    - 의존성 풀을 이용하는 코드는 레지스트리에 대한 참조를 얻어와서 의존성을 얻으려고 상호 작용을 해야 한다. 
    
    - CDL을 사용하면 클래스는 특정 인터페이스를 구현하고 모든 의존성을 직접 가져와야 한다. 

    - 의존성 룩업은 컨테이너와 분리한 채 테스트하기가 어렵다.ㅏ 

    - 의존성 주입을 사용하면 대부분의 클래스가 해야 할 일은 생성자나 수정자로 의존성이 주입될 수 있께 하는 것 뿐이다. (간편함)

        - 의존성 주입을 사용하면 개발이 쉬어진다.
    
### 수정자 주입 vs 생성자 주입

생성자 주입은 컴포넌트 사용 전에 해당 컴포넌트의 의존성을 반드시 갖고 있어야 할 때 매우 유용하다. <br/>

생성자 주입을 사용하면 컨테이너가 의존성 점검 메커니즘을 제공하는지와 상관없이
의존성에 대한 요구사항을 지정할 수 있다.  <br/>

생성자를 사용하면  빈 객체를 불변 객체로 사용할 수 있다.


- 의존성 주입 관련 조언

    - 비즈니스 인터페이스의 모든 구현체들이 어떤 특정한 의존성을 필요로 한다고 완전히 확신할 수 없다면, 구현 클래스 각각이 자신의 의존성을 각자 정의하고 비즈니스 인터페이스에는 비즈니스 메서드만 유지해야 한다. 

<br/>

---

<br/>

## 스프링 제어 역전

<스프링의 제일 큰 비중을 차지한다. >

- 스프링은 의존 객체에 협력 객체를 자동으로 제공하기 위해 의존성 주입을 이용한다. 


- 스프링 Ioc 컨테이너가 자체 의존성 주입 컨테이너와 외부 의존성 룩업 컨테이너 사이의 어댑터 역할을 할 수 있다. 

## 스프링의 의존성 주입

- 스프링 의존성 주입 컨테이너의 핵심은 빈 팩터리 인터페이스이다. 
    - 컴포넌트를 관리하는 BeanFactory는 컴포넌트의 라이프 사이클 뿐만 아니라 의존성 까지 관리한다. 

    - 스프링에서 빈이라는 용어는 컨테이너가 관리하는 모든 컴포넌트를 나타낸다. 


- Application Context
    -  Bean Factory를 상속한 인터페이스다 
    - DI 서비스 외에도 트랜잭션 서비서, AOP 서비스, 국제화를 위한 메시지 소스, 애플리케이션 이벤트 처리와 같은 여러 서비스를 제공한다. 



- Component Scan 
    - 빈의 코드를 스캔하도록 스프링에게 지시한다. 