# JWT

## JWT란 
```bash
JSON Web Token의 약자로 전자 서명 된 URL-sadf(URL로 이용할 수 있는 문자 만 구성된)의 JSON입니다.
```
## 방식
```bash
JWT는 서버와 클라이언트 간 정보를 주고 받을 때 Http 리퀘스트 헤더에 JSON 토큰을 넣은 후 서버는 별도의 인증 과정없이 헤더에 포함되어 있는 JWT 정보를 통해 인증합니다.
```

## JWT 토큰 구성
```bash
JWT는 세 파트로 나누어지며, 각 파트는 점으로 구분하여 xxxx.yyyy.zzzz 이런식으로 표현됩니다. 순서대로 헤더(Header), 페이로드(Payload), 서명(Sinature)로 구성합니다.

1. Header: 토큰의 타입과 해시 암호화 알고리즘으로 구성되어 있습니다. 
>> 첫째는 토큰의 유형(JWT)을 나타내고, 두 번째는 HMAC,SHA256또는 RSA와 같은 해시 알고리즘을 나타내는부분입니다.

2. Payload: 토큰에 담을 클레임(claim)정보를 포함하고 있습니다. 
>> Payload에 담는 정보의 한 조각을 클레임이라고 부르고 이는 name/value의 한 쌍으로 이뤄져 있습니다. 토큰에는 여러개의 클레임 들을 넣을 수 있습니다. 

>> 클레임의 정보는 등록된 클레임, 공개 클레임, 비공개 클레임으로 세 종류가 있습니다.

3. Signature: Secret key를 포함하여 암호화되어 있습니다. 

```


## JWT Process

```bash
1. 사용자가 id와 password를 입력하여 로그인 (클라이언트 -> 서버)
2. 서버는 요청을 확인하고 secret key를 통해 Access Toekn을 발급(서버)
3. 클라이언트에 JWT전달 (서버 -> 클라이언트)
4. 서비스 요청과 권한을 확인하기 위해 헤더에 JWT전달 (클라이언트-> 서버)
5. JWT 서명을 체크하고 JWT에서 사용자 정보를 확인(서버)
6. 클라이언트에 요청에 대한 응답 전달(서버 -> 클라이언트)
```

## JWT 장점과 단점

- 장점

```bash
1. JWT의 주요한 이점은 사용자 인증에 필요한 모든 정보는 토큰 자체에 포함하기 때문에 별도의 인증 저장소가 필요없다.
>> 쿠키와세션 보다 이점

2. 분산 마이크로 서비스 환경에서 중앙 집중식 인증 서버와 데이터베이스에 의존하지 않는 쉬운 인증 및 인가 방법을 제공한다.

3. URL 파라미터와 헤더로 사용

4. 수평 스케일이 용이

5. 디버깅 및 관리가 용이

6. 트래픽 대한 부담이 낮음

7. REST 서비스로 제공 가능

8. 내장된 만료

9. 독립전인 JWT
```

- 단점
```bash
1. 토큰은 클라이언트에 저장되어 데이터베이스에서 사용자 정보를 조작하더라도 토큰에 직접 적용할 수 없습니다.

2. 더 많은 필드가 추가되면 토큰이 커질 수 있습니다.

3. 비상태 애플리케이션에서 토큰은 거의 모든 요청에 대해 전송되므로 데이터 트래피 크기에 영향을 미칠 수 있습니다.
```


## Cookie와 세션

- Http 프로토콜 환경
```bash
1. connectionless
>> 클라이언트가 요청을 한 후 응답을 받으면 그연결을 끊어 버리는 특징

2. stateless
>> 통신이 끝나면 상태를 유지하지 않는 특징
```

- 쿠키: 클라이언트 로컬에 저장되는 키와 값이 들어있는 작은 데이터파일(사용자 정보)

```bash
1. 사용자 인증이 유효한 시간을 명시할 수 있으며, 유효 시간이 정해지면 브라우저가 종료되어도 인증이 유지된다는 특징이 있다.

2. 쿠키는 클라이언트의 상태 정보를 로컬에 저장했다가 참조합니다.
```

- 세션: 쿠키를 기반하고 있지만, 사용자 정보 파일을 브라우저에 저장하는 쿠키와 달리 세션은 서버 측에서 관리합니다.

```bash
1. 서버에서는 클라이언트를 구분하기 위해 세션 ID를 부여하며 웹 브라우저가 서버에 접속해서 브라우저를 종료할 때 까지 인증 상태를 유지합니다.
```